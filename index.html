<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Beautiful Book</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #ffd1dc 0%, #ffb3d9 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            width: 100%;
            max-width: 900px;
        }
        .book-cover-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 40px;
            perspective: 1000px;
            height: 600px;
        }
        .book-cover {
            width: 100%;
            height: 100%;
            cursor: pointer;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform-style: preserve-3d;
            position: relative;
        }
        .book-cover.opened {
            transform: rotateY(-180deg);
        }
        .cover-front, .cover-back {
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            color: white;
            text-align: center;
            padding: 40px;
            font-size: 48px;
            font-weight: bold;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .cover-front {
            background: linear-gradient(135deg, #ff6b9d 0%, #ff8fab 50%, #ffa4c4 100%);
            z-index: 2;
        }
        .cover-back {
            background: linear-gradient(135deg, #ffa4c4 0%, #ffb3d9 50%, #ffc0e0 100%);
            transform: rotateY(180deg);
            z-index: 1;
        }
        .cover-front::before, .cover-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3), transparent 50%);
            pointer-events: none;
            border-radius: 15px;
        }
        .cover-text {
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        .cover-subtitle {
            font-size: 18px;
            margin-top: 20px;
            opacity: 0.9;
        }
        .click-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            opacity: 0.8;
            animation: bounce 2s infinite;
            z-index: 10;
        }
        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        .book-content {
            display: none;
            width: 100%;
        }
        .book-content.active {
            display: block;
        }
        .book-pages {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            min-height: 600px;
            perspective: 1000px;
        }
        .page-left, .page-right {
            flex: 1;
            padding: 40px 30px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            overflow: hidden;
        }
        .page-left {
            background: #fff9fb;
            border-right: 2px solid #ffe0ec;
        }
        .page-right {
            background: white;
        }
        .page-right.flip-out {
            transform: rotateY(180deg);
        }
        .page-left.flip-in {
            transform: rotateY(0deg);
        }
        .page-text {
            font-size: 13px;
            line-height: 1.7;
            color: #333;
            flex: 1;
            min-height: 350px;
            display: flex;
            flex-direction: column;
        }
        .page-text p {
            margin-bottom: 12px;
            text-align: justify;
        }
        .page-number {
            margin-top: auto;
            font-size: 14px;
            color: #999;
            padding-top: 20px;
            text-align: center;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            gap: 20px;
        }
        .btn {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            color: white;
        }
        .btn-prev {
            background: linear-gradient(135deg, #ff8fab, #ff6b9d);
        }
        .btn-prev:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff6b9d, #ff5a8a);
            transform: translateX(-5px);
        }
        .btn-next {
            background: linear-gradient(135deg, #ff6b9d, #ff8fab);
        }
        .btn-next:hover:not(:disabled) {
            background: linear-gradient(135deg, #ff5a8a, #ff6b9d);
            transform: translateX(5px);
        }
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .page-info {
            text-align: center;
            color: #666;
            font-weight: bold;
        }
        .music-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b9d, #ff8fab);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
        .music-toggle:hover {
            transform: scale(1.1);
        }
        .music-toggle.playing {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .shayari-btn {
            padding: 10px 25px;
            font-size: 14px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(135deg, #ff8fab, #ff6b9d);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            font-weight: bold;
            align-self: flex-start;
        }

        .shayari-btn:hover {
            background: linear-gradient(135deg, #ff6b9d, #ff5a8a);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, #fff5f9 0%, #ffe0ec 100%);
            padding: 50px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
            text-align: center;
            position: relative;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            color: #ff6b9d;
            font-size: 28px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .modal-content p {
            color: #333;
            font-size: 16px;
            line-height: 2;
            margin: 20px 0;
            font-style: italic;
            letter-spacing: 0.5px;
            white-space: pre-wrap;
            word-wrap: break-word;
            text-align: left;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 15px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            font-weight: bold;
            color: #ff6b9d;
            cursor: pointer;
            transition: all 0.3s ease;
            background: none;
            border: none;
        }

        .close-btn:hover {
            color: #ff5a8a;
            transform: scale(1.2);
        }
        /* ===== Special Links Section ===== */
.special-links {
    margin-top: 25px;
    padding: 20px;
    background: linear-gradient(135deg, #fff0f6, #ffe0ec);
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 5px 20px rgba(255, 107, 157, 0.2);
}

.special-links h3 {
    color: #ff6b9d;
    margin-bottom: 15px;
    font-size: 20px;
}

.special-links a {
    display: block;
    margin: 10px 0;
    padding: 12px;
    border-radius: 25px;
    background: linear-gradient(135deg, #ff6b9d, #ff8fab);
    color: white;
    text-decoration: none;
    font-weight: bold;
    transition: all 0.3s ease;
}

.special-links a:hover {
    transform: scale(1.05);
    background: linear-gradient(135deg, #ff5a8a, #ff6b9d);
    box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
}
    </style>
</head>
<body>
    <div class="container">
        <!-- Book Cover -->
        <div class="book-cover-container">
            <div class="book-cover" id="bookCover">
                <div class="cover-front">
                    <div class="cover-text">
                        üìñ
                        <div>A Beautiful Story</div>
                    </div>
                    <div class="cover-subtitle">Open to Read</div>
                    <div class="click-hint">Click to Open</div>
                </div>
                <div class="cover-back">
                    <div style="font-size: 24px;">‚ú®</div>
                    <div style="margin-top: 20px;">Turn to Begin</div>
                </div>
            </div>
        </div>
        <!-- Book Content -->
        <div class="book-content" id="bookContent">
            <div class="book-pages" id="bookPages">
                <div class="page-left" id="pageLeft">
                    <div class="page-text" id="pageTextLeft"></div>
                    <div class="page-number">Page <span id="leftPageNum">1</span></div>
                </div>
                <div class="page-right" id="pageRight">
                    <div class="page-text" id="pageTextRight"></div>
                    <div class="page-number">Page <span id="rightPageNum">2</span></div>
                </div>
            </div>
            <div class="controls">
                <button class="btn btn-prev" id="prevBtn" onclick="prevPage()">‚Üê Previous</button>
                <div class="page-info">
                    Page <span id="currentPage">1</span> of <span id="totalPages">1</span>
                </div>
                <button class="btn btn-next" id="nextBtn" onclick="nextPage()">Next ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- Shayari Modal -->
    <div class="modal" id="shayariModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeShayari()">&times;</button>
            <h2>üíï Shayari üíï</h2>
            <p id="shayariText"></p>
        </div>
    </div>

    <!-- Music Toggle Button -->
    <button class="music-toggle" id="musicToggle" onclick="toggleMusic()">üéµ</button>
    <!-- Audio Element -->
    <audio id="bgMusic" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>
    <script>
        const shayariContent = `Ek Ladki Meri Dost Hai üíñ

Ek ladki meri dost hai,
Jo dil ke bohot kareeb hai.
Dekho to lage kuch aur si,
Par naseeb mein sirf dosti hi likha hai.

Thodi si zyada khaas hai woh,
Mohabbat se bhi gehri uski baat hai.
Sabse pehle wahi samajh leti hai,
Jaise mere dil ka raaz usi ke paas hai.

Khush ho jaata hoon jab usse dekhta hoon,
Woh pehle hi chehra padh leti hai mera.
Zakhm chahe kitna bhi gehra ho,
Marham ban jaati hai woh mera.

Dard ki har dava ban jaati hai,
Yaadon ki mehfil ka sukoon bhi woh hi.
Paas baith jaaye to aise lage,
Jaise kisi ne dil ko samajh liya ho kabhi.

Woh door ho jaaye to lagta hai,
Khuda bhi thoda sa rooth gaya.
Uski kami kuch is tarah mehsoos hoti hai,
Jaise dil se noor hi chala gaya.

Kabhi-kabhi bohot sata deta hoon use, 
Shayad dil bhi tod deta hoon anjane mein. 
maafi v mang leta hu usse 
kiu q darta hu mein uske rone se
Fikr hoti hai bohot zyada uski,
Isliye hamesha pooch leta hoon‚Äî
Ghar pahunchi ya nahi?
Khaana sahi se khayi ya nahi?
Haan gussa mujh par karti hai woh,
Par kabhi dikhati nahi.

Bohot hi pyaari hai woh‚Ä¶
Usse main aise kaise rooth jaaun? 
Pyaar jo karta hu usse..
Ek hi darr rehta hai mera‚Äî
Kahin kho na doon use .

Taarif uski karu to lafz kam pad jaate hain,
Kabhi mazaak mein chhed bhi deta hoon use,
Par uske bina dil bechain sa rehta hai,
Jaise woh hi har pal ki aadat ban gayi ho meri.

Sab kuch hai woh mere liye‚Äî
Dua bhi, khushi bhi, rab ki rehmat bhi.
Aaj ke zamaane mein kahan milti hai,
Aisi dosti?

Ek ladki meri dost hai,
Jo dil ke‚Ä¶  üí´`;

        const fullText = `Hey Sayani, I don‚Äôt really know why I‚Äôm writing this now. Maybe it‚Äôs because some things feel unfinished inside me, and I didn‚Äôt want to carry them silently. This isn‚Äôt written in a hurry, and it‚Äôs not meant to change anything  , it‚Äôs just something I felt I should say once. I know this letter is long, but it carries what I truly felt.
What we shared, even just as friends, genuinely mattered to me. It was never only about projects, exams, or college work. It was about the moments around them  , supporting each other, sitting through panic and stress, caring without keeping count. Those moments stayed with me.
During times when I was really low, your words, your understanding, and your encouragement lifted me up. You told me that I mattered to you, and hearing that at that time gave me strength when I didn‚Äôt have much of my own.  You told me I should take care of my health, take my medicines on time, and stop ignoring myself. You listened patiently to all my stories, understood them, and stood by me without judgment. Those moments stayed with me, and they became a part of who I am.
Because of that ,because of the way you were there for me ,it felt natural for me to do the same for you. Supporting you, staying beside you during stressful moments, and caring about your well-being never felt like effort. It felt right.
Over time, that care showed up in many moments we shared together, especially when we were working side by side. I remember explaining the project to you, and I want to say this clearly  , I really, truly appreciate your efforts. The way you tried, learned, took notes, asked questions, and pushed through panic and stress was something meaningful. What you did was real work, and it deserves appreciation. No matter how much panic there was, you fought it back on your own  , I saw that, and I appreciate it deeply.
I still clearly remember 4th December. You were panicking a lot, and we fixed things together, step by step. I could see how anxious you were, and staying there with you felt natural  , leaving wasn‚Äôt an option.
Even the next day, I noticed how much you were still panicking inside. I stayed beside you quietly, supporting you the whole time. When you finally showed your project and I saw that smile on your face, something inside me felt calm. Seeing you relieved made me feel relieved too. Even when you were panicking, I was stressed as well  , I just never showed it.
I also remember the hackathon day. Even though we didn‚Äôt win, I saw how much effort you put into the project. I observed you throughout  , how tired you were, how unwell you felt, yet how you still kept going. I remember noticing that you hadn‚Äôt eaten properly, and it genuinely worried me. Watching you push through despite everything left a strong impression on me. We may not have won the competition, but seeing your dedication and strength is something I‚Äôll always admire and remember.
I still remember the day I gifted you the sketches. I may not know exactly how you felt then, but the smile on your face stayed with me, and seeing you happy meant a lot to me.
I still remember the day we gave the Teacher‚Äôs Day gift and the vase accidentally broke. You had put so much love, care, and effort into making those gifts. When it broke, I could see how deeply it hurt you  , not because of the vase itself, but because of everything you had put into it. That moment filled me with a lot of guilt. I kept replaying it in my head, knowing that your effort and feelings were affected because of me.
That‚Äôs why I decided to fix it  , not just by replacing the vase, but by doing something that showed how much I respected your effort. I bought another vase, and I also got you a small gift, not to compensate, but to say sorry in the only way I knew how. The next day, when we gave it to madam, it wasn‚Äôt just about giving a gift  , it was about making things right.
I also remember the day you were panicking and having difficulty breathing. I could see how overwhelmed you were. I kept asking if you were okay and offered to carry your bag because I was genuinely worried about you. Even then, you chose to carry it yourself. I don‚Äôt know if you noticed it or not, but in that moment, my only thought was about you being okay.
And on the day we gave the gifts, you gave me a keychain. You may not know this, but that small gesture meant more to me than I can explain  , because you were the first person among all my friends who ever gave me a gift, and because it came from you, it carried something deeper. I carried it with me everywhere. When I accidentally lost it, I kept searching for it, and when I finally found it, I realized I wasn‚Äôt afraid of losing a keychain  , I was afraid of losing something that held a part of you.
I still remember the day you gave me jalebis. They weren‚Äôt just delicious ,they felt special because they came from you.
When I gave you a return gift ,a container filled with cookies and a small note ,you may not know this, but that was the first time I had ever written something like that for someone. I wrote it from my heart. In that note, I meant every word when I said that no matter what happens, I would always be there for you ,to support you and help you whenever you needed.
That day was also the first time I ever made something for someone with my own hands: the chowmein. I had never done that for anyone before. It wasn‚Äôt about the food itself; it was about the intention. I wanted to do something from my side that showed care and effort. That small gesture mattered to me more than you may realize, because it came from a place of genuine thought and feeling. I was genuinely happy, because through that small gesture, I was able to make you feel happy.
Even when you were really sick, I felt genuinely worried for you. I couldn‚Äôt stop thinking about you, and I even prayed to God for you to get well. Seeing you in pain affected me more than I can explain.
I remember the day I dreamt about you. In that dream, we were just spending time together, laughing celebrating that Teacher‚Äôs Day. You looked happy. Then suddenly, you started crying, and I felt worried right away. I went to you, asking what was wrong, wanting to make sure you were okay. When I woke up, it stayed with me , because it reminded me how naturally I care about you. Even in my thoughts, all I wanted was for you to be okay.
I still remember the night we worked together on the project. You stayed awake, sharing code with me, not sleeping at all just because I was working on it. Even though your doctor had advised you to rest and take care of your health, you stayed up for me. I truly appreciate all the effort and care you put in.
I also remember the day you were feeling anxious, and I made a website for you to cheer you up  , to remind you that you are not alone and that you can do it. When I shared it with you, I heard your happy voice on the meet, and it meant everything to me  , because you truly matter to me. Here‚Äôs the link: https://jrrity.github.io/happy/
I still remember the day we argued  , it was the day almost no one went to college, and you wanted to go while I felt it might be a waste of time. The argument left my heart feeling heavy afterward. To make things right, I made you a little website  , simple, but filled with all my feelings. I still remember your reaction, and how quietly it healed me.
I still remember the day I wrote a shayari for you, put emotions into words . And there‚Äôs another shayari too ,one I wrote only for you, but never had the courage to show you. 
[SHAYARI_MARKER] 
And you know why I act protective ,it‚Äôs because you matter to me. That‚Äôs why, in college, I would tell you to eat this or that, something healthy, so you wouldn‚Äôt fall sick. I cared about you so much that I‚Äôd ask you to message me once you reached home because I was worried‚Ä¶ khair, you never really did.
For me, these were small efforts, but they carried everything I felt: how deeply I care about you, how much I respect you, and how much I love you. I don‚Äôt even know if there are more things I‚Äôve done for you, but I hope these memories might stay with you too, maybe in the same way they stay with me as those moments mattered deeply.
And you know, Sayani, every good story has a sad part too. But I don‚Äôt know what changed between us. The strong friendship we had built slowly started to fall apart, almost as if something unwanted came in between. It felt like I was losing someone truly special to me. I feel like I may have hurt you, like the trust we shared might have been affected because of me. Sometimes I can‚Äôt help but think that things ended because of my mistakes. I want you to know that I tried to fix those mistakes and improve myself  , not out of desperation, but because I never want to lose someone as genuinely special to me as you are.
And yes, I miss the little things too  , like those messages where you used to say, ‚Äúki re uthli.‚Äù Whenever I woke up in the morning, your text used to bring me comfort in ways you might not even realize. I miss your sweet sa voice saying ‚Äúgood night‚Äù . I also miss the moments we shared together  , the laughter, the small jokes, the long project nights, the little gestures, and even the times we quietly supported each other. All of it made our friendship feel so real and special. I understand that some things change, and I truly respect that, but those memories will always stay with me and and I hope they stay with you too.
And you know, this friendship has taught me so much. Through you, I learned patience and how to stay calm when someone else is anxious. You showed me responsibility, how to support someone without expecting anything in return. You gave me confidence and made me realize my own self-worth. You taught me the importance of respecting others‚Äô comfort, boundaries, and timing. Most of all, you made me feel that I‚Äôm not alone. I learned from you in so many ways, and because of that, I improved myself even still improving some portions of me.
I really respect you  , your dreams, your choices, your boundaries, and the beautiful person you are. From creating small memories to making little efforts just for you, each of those moments made me genuinely happy. 
And over time, I realized that my feelings for you had grown into something more than friendship. I know I should have shared this with you earlier, but I was genuinely scared and unsure of how to say it. What I feel comes from a deep place of care  , wanting to support you, celebrate your strengths, and be there for you through everything you face. I know you‚Äôve been carrying a lot in your heart I understand that. And since you were already aware of how I felt, I started noticing a change between us. There were moments when I felt a distance growing  , times when my messages didn‚Äôt get a response, especially when they came from a place of care, or even when I tried to make you smile with something simple. I don‚Äôt know the reasons behind it, and I‚Äôm not here to question or blame you. I just want to be honest about how it felt on my side. That quiet distance hurt at times, not because of expectations, but because the connection we shared genuinely mattered to me.
No matter what the future holds, I want you to know that I will always remember this chapter with gratitude and warmth, never with regret. 
I genuinely wish you peace, good health, confidence, and happiness. I hope you always believe in yourself the way you learned to during those stressful moments  , because you truly are capable.
After writing all of this, I don‚Äôt know how you might feel. I also don‚Äôt know whether this is our last conversation or simply a pause in our story. I only wanted to be honest about what this friendship, and you, have meant to me.
Whatever happens next, I will respect it. And no matter where life takes us, I‚Äôll carry these memories with quiet gratitude.
And one last thing  , please never doubt yourself or think that you can‚Äôt do something. From my perspective, you did everything beautifully. Whether it was during the hackathon, the projects you worked on, the gifts you made, or every new thing you tried to learn, you always gave your best  , often with a dedication that truly stood out to me.
I am genuinely proud of you. I always believed in you, just the way you once believed in me. You matter to me more than you may realize, and I‚Äôm deeply grateful for you  , for your presence, your efforts, and the care you showed. What I feel for you is genuine care and respect, and that will always stay with me, whatever the future brings.
Thank you  , for the experiences, the effort, the lessons, and the memories.
Valo thakis. And happy new year.`;

        let currentPageIndex = 0;
        const maxLinesPerPage = 20;
        let pageLines = [];
        let totalPages = 0;
        let isPlaying = false;
        let shayariPageIndex = -1;
        
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        const pageLeft = document.getElementById('pageLeft');
        const pageRight = document.getElementById('pageRight');
        
        function toggleMusic() {
            if (isPlaying) {
                bgMusic.pause();
                isPlaying = false;
                musicToggle.classList.remove('playing');
            } else {
                bgMusic.play();
                isPlaying = true;
                musicToggle.classList.add('playing');
            }
        }

        function openShayari() {
            document.getElementById('shayariText').textContent = shayariContent;
            document.getElementById('shayariModal').classList.add('show');
        }

        function closeShayari() {
            document.getElementById('shayariModal').classList.remove('show');
        }

        window.onclick = function(event) {
            const modal = document.getElementById('shayariModal');
            if (event.target == modal) {
                modal.classList.remove('show');
            }
        }
        
        function initializePages() {

    // ‚úÖ Auto-convert URLs to clickable links FIRST
    const text = fullText.replace(
        /(https?:\/\/[^\s]+)/g,
        '<a href="$1" target="_blank">$1</a>'
    );

    let allLines = [];
    const lines = text.split('\n');

    lines.forEach(line => {

        if (line.includes('[SHAYARI_MARKER]')) {
    allLines.push('__SHAYARI_BUTTON__');
    return;
}


        if (!line.trim()) {
            allLines.push('');
            return;
        }

        // ‚úÖ DO NOT BREAK HTML TAGS
        if (line.includes('<a ')) {
            allLines.push(line.trim());
            return;
        }

        const words = line.trim().split(/\s+/);
        let currentLine = '';

        words.forEach(word => {
            if ((currentLine + ' ' + word).length > 60) {
                allLines.push(currentLine);
                currentLine = word;
            } else {
                currentLine += (currentLine ? ' ' : '') + word;
            }
        });

        if (currentLine) allLines.push(currentLine);
    });

    pageLines = [];
    for (let i = 0; i < allLines.length; i += maxLinesPerPage) {
        pageLines.push(allLines.slice(i, i + maxLinesPerPage));
    }

    totalPages = Math.ceil(pageLines.length / 2);
    document.getElementById('totalPages').textContent = totalPages;
    displayPage();
}

        function displayPage() {
    if (pageLines.length === 0) return;

    const leftPageIndex = currentPageIndex * 2;
    const rightPageIndex = leftPageIndex + 1;

    // Clear flip classes (UNCHANGED)
    pageLeft.classList.remove('flip-out');
    pageRight.classList.remove('flip-out');

    /* ========= LEFT PAGE ========= */
    let leftHTML = '';

    if (leftPageIndex < pageLines.length) {
        leftHTML = pageLines[leftPageIndex]
            .map(line => {
                if (line === '__SHAYARI_BUTTON__') {
                    return '<button class="shayari-btn" onclick="openShayari()">üíï Read Shayari üíï</button>';
                }
                return line;
            })
            .join('<br>');
    }

    document.getElementById('pageTextLeft').innerHTML = leftHTML;

    /* ========= RIGHT PAGE ========= */
    let rightHTML = '';

    if (rightPageIndex < pageLines.length) {
        rightHTML = pageLines[rightPageIndex]
            .map(line => {
                if (line === '__SHAYARI_BUTTON__') {
                    return '<button class="shayari-btn" onclick="openShayari()">üíï Read Shayari üíï</button>';
                }
                return line;
            })
            .join('<br>');
    }

    // ‚≠ê Special links ONLY on last RIGHT page (UNCHANGED)
    if (currentPageIndex === totalPages - 1) {
        rightHTML += '<br><br>' + getSpecialLinksHTML();
    }

    document.getElementById('pageTextRight').innerHTML = rightHTML;

    /* ========= PAGE NUMBERS (UNCHANGED) ========= */
    document.getElementById('leftPageNum').textContent = leftPageIndex + 1;
    document.getElementById('rightPageNum').textContent = rightPageIndex + 1;
    document.getElementById('currentPage').textContent = currentPageIndex + 1;

    updateButtons(); // UNCHANGED
}

        
        function nextPage() {
            if (currentPageIndex < totalPages - 1) {
                pageRight.classList.add('flip-out');
                
                setTimeout(() => {
                    currentPageIndex++;
                    displayPage();
                }, 400);
            }
        }
        
        function prevPage() {
            if (currentPageIndex > 0) {
                pageLeft.classList.add('flip-out');
                
                setTimeout(() => {
                    currentPageIndex--;
                    displayPage();
                }, 400);
            }
        }
        
        function updateButtons() {
            document.getElementById('prevBtn').disabled = currentPageIndex === 0;
            document.getElementById('nextBtn').disabled = currentPageIndex === totalPages - 1;
        }
        
        document.getElementById('bookCover').addEventListener('click', function() {
            this.classList.add('opened');
            
            setTimeout(() => {
                document.querySelector('.book-cover-container').style.display = 'none';
                document.getElementById('bookContent').classList.add('active');
                initializePages();
                
                if (!isPlaying) {
                    bgMusic.play();
                    isPlaying = true;
                    musicToggle.classList.add('playing');
                }
            }, 400);
        });
        
        updateButtons();
        function getSpecialLinksHTML() {
    return `
        <div class="special-links">
            <h3>üíñ Some Special Links üíñ</h3>
            <a href="https://jrrity.github.io/bestie/" target="_blank">üå∏ Bestie</a>
            <a href="https://jrrity.github.io/happy/" target="_blank">üòä My cutie</a>
            <a href="https://jrrity.github.io/bear/" target="_blank">üß∏ Bear</a>
            <a href="https://jrrity.github.io/flower/" target="_blank">üå∑ Flower</a>
            <p style="margin-top:12px; font-size:13px; color:#555;">
                Made with care, memories, and emotions ‚ú®
            </p>
        </div>
    `;
}

    </script>
</body>
</html>
